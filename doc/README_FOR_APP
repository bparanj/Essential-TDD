1. Allow user to download the book when the payment is success. When sale status is 'Completed'.
2. Integrate IPN Handler with Cahor. Needed to get refund notification, fraud report etc.
3. Create refund. If mc_gross and payment_gross is negative. It is a refund. It cannot exceed the payment amount.

To Do for Dec 10, 12

1. Create bounty when the sale completes for a referral.
2. Replace hard coded product name and link with variables in the product mailer emails.
3. Drop the database, recreate all tables and run the test.
4. Test checkout manually. Hit payment_notifications with curl to make sure it works. 

IceBox

1. Create paper prototype and delegate the CSS design to Elance.
2. Debit refunds when calculating payable_commission for affiliates.
	   t.decimal  "payable_commission",  :precision => 11, :scale => 2, :default => 0.0,   :null => false
   Monthly CRON will populate this field.
3. Refer pragmatic-order.pdf. Generate pdf receipt.
4. Make email customizable. Users can enter details about bonus links.
5. Cancel return url must be a page where you can persuade the buyer.
6. Measure time taken from click to getting to the landing page. Monitor this constantly. Make this very fast.



