** Paypal Express Checkout with Affiliate Referral **

1. Create a user with an affiliate. Check rake db:seed.
2. Open the affiliate_site.html. The referrer_code should be the same as the above user affiliate referrer_code.
3. Click on the link to buy the book. 
4. Click on the Paypal checkout button.
5. Complete the paypal transaction by using:
    email : amy_1342401985_per@gmail.com
    password : 342401932
6. Check that the order was created with details text variable having custom variable value
the same as the affiliate referrer_code.
7. Check that the transactions table success value is true.

Testing this using Scripts

1. Run Selenium test case to simulate affiliate referral.
2. Run Express checkout Selenium test case.
3. Run rake paypal:ipn to check transaction status and custom variable values. The value of custom must be the same as the affiliate_site.html value nibj5o3q4m.

** Simulate IPN Notification in Development **

1. Copy transaction_id from the Paypal Thank You page : 0UB45589MG4871049. This is the same as 
   the transaction.details['transaction_id'] value.
2. Plug into : 

curl -d "txn_id=6KD44981DM039372A&invoice=1&payment_status=Completed" http://localhost:3020/payment_notifications

** Checkout **

1. Click 'Buy Now' button.
2. Make payment
3. Allow user to download the book when the payment is success.

** Write a Request spec for the following story **

1) Customer browses affiliate site
2) Customer clicks on referral link : affiliatelogic.net?affid=1&pid=2&lp=4
3) Affiliate Logic records click
4) Affiliate Logic sets cookie on client browser : cookies[:affiliate_id] = { :value => @affiliate_id + " " @product_id
 	:expires => @cookie_duration_for_vendor }
5) Affiliate Logic redirects the customer to product sales copy page or any of the landing page on vendor site by	looking up the lp value in the database.


