IPN 

1. Create bounty when the sale completes for a referral. 
2. Create refund. If mc_gross and payment_gross is negative. It is a refund. It cannot exceed the payment amount.

Backlog

1. File upload feature.
2. Replace hard coded product link with variables in the product mailer emails.
3. Allow user to download the book when the payment is success. When sale status is 'Completed'.

To Do for Dec 14, 12

1. Upgrade FF to latest version and install Selenium IDE. Check if the automated test can run in this setup.
2. Implement process_refund
3. Admin dashboard : Admin can create affiliates for a given user.
4. Since IPN messages can be delayed—hence not exactly “instant”—IPN should not be exclusively relied on when immediate order fulfillment is necessary, such as in the case of a digital download service. Use Express checkout response code to check the purchase is complete and kick-off the fulfillment.
5. Automate checkout process testing.

# @notify.status == 'Partially-Refunded'          
# What is partial refund? how to handle partial refund?

# Status of transaction. List of possible values:
# <tt>Canceled-Reversal</tt>::
# <tt>Completed</tt>::
# <tt>Denied</tt>::
# <tt>Expired</tt>::
# <tt>Failed</tt>::
# <tt>In-Progress</tt>::
# <tt>Partially-Refunded</tt>::
# <tt>Pending</tt>::
# <tt>Processed</tt>::
# <tt>Refunded</tt>::
# <tt>Reversed</tt>::
# <tt>Voided</tt>::
def status
  params['payment_status']
end

---------------------------------------------------------------------------------------

Deploy

1. Use Chef to deploy the site. 
2. Deploy the IPN handler code.
3. Turn on IPN and specify the URL to which PayPal posts the notifications.
4. Test IPN Handler using Paypal Sandbox : # seanbehan.com/business/paypal-ipn-simulator/
5. Sanbox Users Guide has instructions on testing IPN using simulator.
6. Testing IPN messages. You can test your IPN receiver script using the IPN Simulator under Test Tools in your sandbox account. Since you cannot observe the request (it is sent from Paypal), you can save it to a file or send it to your Email account for verifying and debugging your script.

---------------------------------------------------------------------------------------

After Deployment

1) Check if domain field gets populated for clicks table when a new visitor clicks on a affiliate link.
2) Subscribe for wordpress account for affiliatelogic.biz and write articles once a week. Delegate this task.
3) Make release announcement on SVRM group, Rubyflow, Rubyinside, Ruby podcast etc.


